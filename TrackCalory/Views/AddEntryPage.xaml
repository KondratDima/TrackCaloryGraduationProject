<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TrackCalory.Views.AddEntryPage"
             Title="–î–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Å">
    <ScrollView>
        <StackLayout Padding="20" Spacing="15">

            

            <Border HeightRequest="50"
                    WidthRequest="400"
                    StrokeShape="RoundRectangle 10"
                    Margin="0,0,0,20">
                <Border.Background>
                    <LinearGradientBrush EndPoint="1,1">
                        <GradientStop Color="#f4becb" Offset="0.25"/>
                        <GradientStop Color="#5fd37c" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>

                <Button Text="–†–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ –∫–∞–ª–æ—Ä—ñ—ó –∑ AI"
                        ImageSource="robot.png"
                        MaximumHeightRequest="60"
                        ContentLayout="Left, 10"
                        TextColor="White"
                        FontSize="17"
                        FontAttributes="Bold"
                       BackgroundColor="Transparent"
                         Clicked="OnAnalyzePhotoClicked"/>
            </Border>

            <Label Text="–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å –ø—Ä–æ –∫–∞–ª–æ—Ä—ñ—ó" 
                   FontSize="27" 
                   FontAttributes="Bold"
                   TextColor="#694f55"
                   HorizontalOptions="Center"
                   Margin="0,0,0,0"/>

            <BoxView HeightRequest="1" BackgroundColor="LightGray" Margin="0,0"/>

            <!-- –°–ï–ö–¶–Ü–Ø –§–û–¢–û -->
            <Frame BackgroundColor="#f0eaed" 
                   HasShadow="False" 
                   CornerRadius="10" 
                   Padding="15"
                   Margin="0,0,0,0">
                <StackLayout Spacing="10">
                    <HorizontalStackLayout>
                        <Image Source="camera.png"
                               MaximumHeightRequest="22"
                               Margin="0,0,5,0"
                            />
                        <Label Text="–§–æ—Ç–æ —Å—Ç—Ä–∞–≤–∏ (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)" 
                           
                           FontSize="16" 
                           FontAttributes="Bold"/>
                    </HorizontalStackLayout>
                    <!-- –ü—Ä–µ–≤'—é —Ñ–æ—Ç–æ -->
                    <Frame x:Name="PhotoPreviewFrame"
                           IsVisible="False"
                           CornerRadius="10"
                           Padding="0"
                           HasShadow="True"
                           HeightRequest="200">
                        <Grid>
                            <Image x:Name="PhotoPreview"
                                   Aspect="AspectFill"
                                   HeightRequest="200"/>
                            <!-- –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–æ—Ç–æ -->
                            <Button x:Name="RemovePhotoButton"
                                    Text="‚úï"
                                    BackgroundColor="#e1607e"
                                    TextColor="White"
                                    CornerRadius="20"
                                    WidthRequest="40"
                                    HeightRequest="40"
                                    HorizontalOptions="End"
                                    VerticalOptions="Start"
                                    Margin="10"
                                    Clicked="OnRemovePhotoClicked"/>
                        </Grid>
                    </Frame>

                    <!-- –ö–Ω–æ–ø–∫–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–æ—Ç–æ -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Button Grid.Column="0"
                                Text="üì∑ –ö–∞–º–µ—Ä–∞"
                                BackgroundColor="#aff3c0"
                                TextColor="Black"
                                FontSize="12"
                                Clicked="OnTakePhotoClicked"/>

                        <Button Grid.Column="1"
                                Text="üñºÔ∏è –ì–∞–ª–µ—Ä–µ—è"
                                BackgroundColor="#aff3c0"
                                TextColor="Black"
                                FontSize="12"
                                Clicked="OnPickPhotoClicked"/>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- –°–ï–ö–¶–Ü–Ø –†–£–ß–ù–û–ì–û –û–ü–ò–°–£ –°–¢–†–ê–í–ò -->
            <Label Text="–û–ø–∏—Å —Å—Ç—Ä–∞–≤–∏:" FontSize="16"/>
            <Entry x:Name="DescriptionEntry"
                   Placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –û–º–ª–µ—Ç –∑ –æ–≤–æ—á–∞–º–∏"
                   FontSize="16"/>

            <Label Text="–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞–ª–æ—Ä—ñ–π:" FontSize="16"/>
            <Entry x:Name="CaloriesEntry"
                   Placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: 250"
                   Keyboard="Numeric"
                   FontSize="16"/>

            <Label Text="–î–∞—Ç–∞:" FontSize="16"/>
            <DatePicker x:Name="DatePicker" FontSize="16"/>

            <Label Text="–¢–∏–ø:" FontSize="16"/>
            <Picker x:Name="Category" Title="–û–±–µ—Ä—ñ—Ç—å –º–µ—Ç—É">
                <Picker.ItemsSource>
                    <x:Array Type="{x:Type x:String}">
                        <x:String>–°–Ω—ñ–¥–∞–Ω–æ–∫</x:String>
                        <x:String>–û–±—ñ–¥</x:String>
                        <x:String>–í–µ—á–µ—Ä—è</x:String>
                        <x:String>–ü–µ—Ä–µ–∫—É—Å</x:String>
                        <x:String>–î–µ—Å–µ—Ä—Ç</x:String>
                        <x:String>–ù–∞–ø—ñ–π</x:String>
                        <x:String>–Ü–Ω—à–µ</x:String>
                    </x:Array>
                </Picker.ItemsSource>
                
            </Picker>

            <!-- –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–ª—è –ë–ñ–£ (–∑–≥–æ—Ä–Ω—É—Ç—ñ) -->
            <Frame BackgroundColor="White" 
                   HasShadow="False" 
                   BorderColor="LightGray"
                   CornerRadius="10" 
                   Padding="15">
                <StackLayout Spacing="10">
                    <Label Text="üî¨ –ë–ñ–í (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           TextColor="Gray"/>

                    <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10">
                        <StackLayout Grid.Column="0">
                            <Label Text="–ë—ñ–ª–∫–∏ (–≥)" FontSize="12" TextColor="Gray"/>
                            <Entry x:Name="ProteinEntry"
                                   Placeholder="0"
                                   Keyboard="Numeric"
                                   FontSize="14"/>
                        </StackLayout>

                        <StackLayout Grid.Column="1">
                            <Label Text="–ñ–∏—Ä–∏ (–≥)" FontSize="12" TextColor="Gray"/>
                            <Entry x:Name="FatEntry"
                                   Placeholder="0"
                                   Keyboard="Numeric"
                                   FontSize="14"/>
                        </StackLayout>

                        <StackLayout Grid.Column="2">
                            <Label Text="–í—É–≥–ª–µ–≤. (–≥)" FontSize="12" TextColor="Gray"/>
                            <Entry x:Name="CarbsEntry"
                                   Placeholder="0"
                                   Keyboard="Numeric"
                                   FontSize="14"/>
                        </StackLayout>
                    </Grid>
                </StackLayout>
            </Frame>

            <Button Text="–ó–±–µ—Ä–µ–≥—Ç–∏"
                    BackgroundColor="#5fd37c"
                    TextColor="White"
                    FontSize="18"
                    Clicked="OnSaveClicked"
                    Margin="0,20,0,0"/>

            <Button Text="–°–∫–∞—Å—É–≤–∞—Ç–∏"
                    BackgroundColor="#a79599"
                    TextColor="White"
                    FontSize="18"
                    Clicked="OnCancelClicked"/>

        </StackLayout>
    </ScrollView>
</ContentPage>